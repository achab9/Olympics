<html>

	<head>

		<link href="site.css" rel="stylesheet">

	</head>

	<body id = "body">

		<nav id = "nav01"></nav>
		<div id="main">
		<script src = "Styling2.js" > </script>	

		<p id = "comehere"> Vote and see who's Winning! </p>

		<script src = "http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

			<form id = "myForm3" action = "" method = "POST" target = "no-target">

				<select id = "dropdown"> Vote for you Country!
					<option value> </option>
					<option value = "Argentina" id = "ARG"> Argentina </option>
					<option value = "Australia" id = "AUS"> Australia </option>
					<option value = "Belgium" id = "BEL"> Belgium </option>
					<option value = "Brazil" id = "BRA"> Brazil </option>
					<option value = "Canada" id = "CAN"> Canada </option>
					<option value = "China" id = "CHN"> China </option>
					<option value = "Denmark" id = "DEN"> Denmark </option>
					<option value = "Dominican Republic" id = "DOM"> Dominican Republic </option>
					<option value = "Egypt" id = "EGY"> Egypt </option>
					<option value = "Estonia" id = "EST"> Estonia </option>
					<option value = "Finland" id = "FIN"> Finland </option>
					<option value = "France" id = "FRA"> France </option>
					<option value = "Germany" id = "GER"> Germany </option>
					<option value = "Great Britain" id = "GBR"> Great Britain </option>
					<option value = "Greece" id = "GRE"> Greece </option>
					<option value = "Haiti" id = "HAI"> Haiti </option>
					<option value = "Ireland" id = "IRE"> Ireland </option>
					<option value = "Italy" id = "ITA"> Italy </option>
					<option value = "Jamaica" id = "JAM"> Jamaica </option>
					<option value = "Japan" id = "JPN"> Japan </option>
					<option value = "Kazahstan" id = "KAZ"> Kazahstan </option>
					<option value = "Korea" id = "KOR"> Korea </option>
					<option value = "Latvia" id = "LAT"> Latvia </option>
					<option value = "Lithuania" id = "LTU"> Lithuania </option>
					<option value = "Mexico" id = "MEX"> Mexico </option>
					<option value = "Morocco" id = "MOR"> Morocco </option>
					<option value = "Netherlands" id = "NED"> Netherlands </option>
					<option value = "Nicaragua" id = "NCA"> Nicaragua </option>
					<option value = "Nigeria" id = "NIG"> Nigeria </option>
					<option value = "Norway" id = "NOR"> Norway </option>
					<option value = "Oman" id = "OMA"> Oman </option>
					<option value = "Philipines" id = "PHI"> Philipines </option>
					<option value = "Poland" id = "POL"> Poland </option>
					<option value = "Puerto Rico" id = "PUR"> Puerto Rico </option>
					<option value = "Quatar" id = "QAT"> Quatar </option>
					<option value = "Romania" id = "ROU"> Romania </option>
					<option value = "Russia" id = "RUS"> Russia </option>
					<option value = "Spain" id = "SPA"> Spain </option>
					<option value = "Switzerland" id = "SWZ"> Switzerland </option>
					<option value = "Tanzania" id = "TAN"> Tanzania </option>
					<option value = "Turkey" id = "TUR"> Turkey </option>
					<option value = "Uganda" id = "UGA"> Uganda </option>
					<option value = "United States" id = "USA"> United States </option>
					<option value = "Venezuela" id = "VEN"> Venezuela </option>
					<option value = "Vietnam" id = "VIE"> Vietnam </option>
					<option value = "Yamen" id = "YEM"> Yamen </option>
					<option value = "Zambia" id = "ZAM"> Zambia </option>
					<option value = "Zimbabwe" id = "ZIM"> Zimbabwe </option>
				</select>

				<button id = "endButton" type="submit" value="submit"> Vote! </button>
				
			</form>

			<iframe src = "#" id = "no-target" name = "no-target" style = "visibility:hidden"></iframe>

			<script>

				$('#myForm3').on('submit',function(){

					var baseURL3 = "https://docs.google.com/forms/d/1ARjftkj3pYxHlEr73MbT3ll2GobmUspEhVd8rKXIsbY/formResponse?";
					var submitRef3 = "&submit=Submit";
					var Dropdown = encodeURIComponent($("#dropdown").val());
					var DropdownID = "entry_1167550619";

					var submitURL3 = (baseURL3 + DropdownID + "=" + Dropdown + submitRef3);

					console.log(submitURL3);
					$(this)[0].action=submitURL3;

				});
			

			</script>

		    <html>

			
			<script type="text/javascript" src="https://www.google.com/jsapi"></script> <!--  This is required!  It adds "loaders" for all of the Google APIs (Application Programming Interface) that will (may) be used in this program -->
			<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
			<script type="text/javascript">  // This code *could* be put in another file...and likely I would ask you to do that, but it will make it too cumbersome for this tutorial!
				google.charts.load('current', {'packages':['geochart']});  // This loads the Google "Visualization" API, which is needed to use Google Charts or Google Tables.  It's required code!  The arguments are API, Version, Packages (this one is not required)
				google.setOnLoadCallback(readData);  // The google.setOnLoadCallback method will call the specified callback function once your document (including any specified Google APIs) have finished loading.

				function readData() {
				  var query = new google.visualization.Query(  // This Query is asking for the data from the Google Spreadsheet
				  //This is the URL of the data source -- it must be public and shared (see the video on creating a form and sharing settings).  This link has our TV watching data
				  'https://docs.google.com/spreadsheets/d/1WdK8uLYWec3G-Y2Sddk9xP3KIVxR1PIwUa3z_WAF3Ks/gviz/tq?tq=select%20B');
				  
				  // Send the query and when the query finishes, call the function "handleQueryResponse"
				  query.send(handleQueryResponse);
				}

				function handleQueryResponse(response) { // This is enacted when the query response is returned.  If the query was successful, the response is the data table.  If the query failed, an error is returned, no table
					  if (response.isError()) {
					    alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
					    return; //Alert the user with the error code and return to the place where this function was called
					  }

					  var data = response.getDataTable();
					  console.log(data);

					  //If you prefer (now that we've done so much with parsing CSV data), you can get the data in CSV form
					  var csvData = google.visualization.dataTableToCsv(data);
					  console.log(csvData);

					  //Just for fun, this data will also be put into a Google Chart (it doesn't have a lot of meaning, but..imagine what you could do with this!)
					  var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
					  chart.draw(data, { legend: { position: 'none' } });


					

					function chartVariableValues () {

						for (var i = 0; i < csvData.length; i++) {

							if(csvData[i] == "A" && csvData[i + 1] == "r" && csvData[i + 2] == "g") {
								argentina ++; 
							} // this brace ends argentina 

							if(csvData[i] == "A" && csvData[i + 1] == "u") {
								australia ++;
							} // this brace ends australia 

							if(csvData[i] == "B" && csvData[i + 1] == "e") {
								belgium ++;
							} // this brace ends belgium

							if(csvData[i] == "B" && csvData[i + 1] == "r" && csvData[i + 2] == "a") {
								brazil ++;
							} // this brace ends brazil

							if(csvData[i] == "C" && csvData[i + 1] == "a" && csvData[i + 2] == "n" && csvData[i + 3] == "a") {
								canada ++;
							} // this brace ends canada 

							if(csvData[i] == "C" && csvData[i + 1] == "h") {
								china ++;
							}

							if(csvData[i] == "D" && csvData[i + 1] == "e") {
								denmark ++;
							}

							if(csvData[i] == "D" && csvData[i + 1] == "o") {
								dominican ++;
							}

							if(csvData[i] == "E" && csvData[i + 1] == "g") {
								egypt ++;
							}

							if(csvData[i] == "E" && csvData[i + 1] == "s" && csvData[i + 2] == "t") {
								estonia ++;
							}

							if(csvData[i] == "F" && csvData[i + 1] == "i") {
								finland ++;
							}

							if(csvData[i] == "F" && csvData[i + 1] == "r") {
								france ++;
							}

							if(csvData[i] == "G" && csvData[i + 1] == "e" && csvData[i + 2] == "r") {
								germany ++;
							}

							if(csvData[i] == "G" && csvData[i + 1] == "r" && csvData[i + 2] == "e" && csvData[i + 3] == "a") {
								britain ++;
							}

							if(csvData[i] == "G" && csvData[i + 1] == "r" && csvData[i + 2] == "e" && csvData[i + 3] == "e") {
								greece ++;
							}

							if(csvData[i] == "H" && csvData[i + 1] == "a") {
								haiti ++;
							}

							if(csvData[i] == "I" && csvData[i + 1] == "r") {
								ireland ++;
							}

							if(csvData[i] == "I" && csvData[i + 1] == "t" && csvData[i + 2] == "a" && csvData[i + 3] == "l") {
								italy ++;
							}

							if(csvData[i] == "J") {
								japan ++;
							}

							if(csvData[i] == "K" && csvData[i + 1] == "a") {
								kazahstan ++;
							}

							if(csvData[i] == "K" && csvData[i + 1] == "o") {
								korea ++;
							}

							if(csvData[i] == "L" && csvData[i + 1] == "a" && csvData[i + 2] == "t") {
								latvia ++;
							}

							if(csvData[i] == "L" && csvData[i + 1] == "i" && csvData[i + 2] == "t") {
								lithuania ++;
							}

							if(csvData[i] == "M" && csvData[i + 1] == "e" && csvData[i +2] == "x") {
								mexico ++;
							}

							if(csvData[i] == "M" && csvData[i + 1] == "o") {
								morocco ++;
							}

							if(csvData[i] == "N" && csvData[i + 1] == "e" && csvData[i + 2] == "t") {
								netherlands ++;
							}

							if(csvData[i] == "N" && csvData[i + 1] == "i" && csvData[i + 2] == "c" && csvData[i + 3] == "a" && csvData[i + 4] == "r") {
								nicaragua ++;
							}

							if(csvData[i] == "N" && csvData[i + 1] == "i" && csvData[i + 2] == "g") {
								nigeria ++;
							}

							if(csvData[i] == "N" && csvData[i + 1] == "o" && csvData[i + 2] == "r") {
								norway ++;
							}

							if(csvData[i] == "O" && csvData[i + 1] == "m" && csvData[i + 2] == "a" && csvData[i + 3] == "n") {
								oman ++;
							}

							if(csvData[i] == "P" && csvData[i + 1] == "h") {
								philipines ++;
							}

							if(csvData[i] == "P" && csvData[i + 1] == "o") {
								poland ++;
							}

							if(csvData[i] == "P" && csvData[i + 1] == "u" && csvData[i + 2] == "e") {
								puerto ++;
							}

							if(csvData[i] == "Q") {
								quatar ++;
							}

							if(csvData[i] == "R" && csvData[i + 1] == "o" && csvData[i + 2] == "m") {
								romania ++;
							}

							if(csvData[i] == "R" && csvData[i + 1] == "u") {
								russia ++;
							}

							if(csvData[i] == "S" && csvData[i + 1] == "p") {
								spain ++;
							}

							if(csvData[i] == "S" && csvData[i + 1] == "w") {
								switzerland ++;
							}

							if(csvData[i] == "T" && csvData[i + 1] == "a" && csvData[i + 2] == "n" && csvData[i + 3] == "z") {
								tanzania ++;
							}

							if(csvData[i] == "U" && csvData[i + 1] == "g" && csvData[i + 2] == "a") {
								uganda ++;
							}

							if(csvData[i] == "U" && csvData[i + 1] == "n" && csvData[i + 2] == "i") {
								united ++;
							}

							if(csvData[i] == "V" && csvData[i + 1] == "e") {
								venezuela ++;
							}

							if(csvData[i] == "V" && csvData[i + 1] == "i" && csvData[i + 2] == "e") {
								vietnam ++;
							}

							if(csvData[i] == "Y" && csvData[i + 1] == "a") {
								yamen ++;
							}

							if(csvData[i] == "Z" && csvData[i + 1] == "a" && csvData[i + 2] == "m") {
								zambia ++;
							}

							if(csvData[i] == "Z" && csvData[i + 1] == "i" && csvData[i + 2] == "m") {
								zimbabwe ++;
							}

							
						} // this brace ends the for loop

					} // this brace ends the function chartVariableValues 

					

				chartVariableValues();
				drawRegionsMap();
				} //This brace ends the function handleQueryResponse

				function drawRegionsMap() {

			        var data = google.visualization.arrayToDataTable([
			          ['Country', 'Votes'],
			          ['Argentina', argentina],
			          ['Australia', australia],
			          ['Belgium', belgium],
			          ['Brazil', brazil],
			          ['Canada', canada],
			          ['China', china],
			          ['Denmark', denmark],
			          ['Dominican Republic', dominican],
			          ['Egypt', egypt],
			          ['Estonia', estonia],
			          ['Finland', finland],
			          ['France', france],
			          ['Germany', germany],
			          ['Great Britain', britain],
			          ['Greece', greece],
			          ['Haiti', haiti],
			          ['Ireland', ireland],
			          ['Italy', italy],
			          ['Japan', japan],
			          ['Kazahstan', kazahstan],
			          ['South Korea', korea],
			          ['Latvia', latvia],
			          ['Lithuania', lithuania],
			          ['Mexico', mexico],
			          ['Morocco', morocco],
			          ['Netherlands', netherlands],
			          ['Nicaragua', nicaragua],
			          ['Nigeria', nigeria],
			          ['Norway', norway],
			          ['Oman', oman],
			          ['Philipines', philipines],
			          ['Poland', poland],
			          ['Puerto Rico', puerto],
			          ['Quatar', quatar],
			          ['Romania', romania],
			          ['Russia', russia],
			          ['Spain', spain],
			          ['Switzerland', switzerland],
			          ['Tanzania', tanzania],
			          ['Uganda', uganda],
			          ['United States', united],
			          ['Venezuela',venezuela],
			          ['Vietnam', vietnam],
			          ['Yamen', yamen],
			          ['Zambia', zambia],
			          ['Zimbabwe', zimbabwe],
			        ]);

			        var options = {

			        	backgroundColor: '#81d4fa',
			        	colorAxis:  {minValue: 0, maxValue: 5, colors: ['#3333ff', '#ff0066']},
			        	magnifyingGlass: {enable: true, zoomFactor: 25},
			        	tooltip: {textStyle: { color: 'black', fontName: 'times', fontSize: 15,}},
    

			        };

			        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

			        chart.draw(data, options);
			      }
				

			</script>
		
			<div id="regions_div" style="width: 100%; height: 100%;"></div>

			<script> 

				var argentina = 0;
				var australia = 0;
				var belgium = 0;
				var brazil = 0;
				var canada = 0;
				var china = 0;
				var denmark = 0;
				var dominican = 0;
				var egypt = 0;
				var estonia = 0; 
				var finland = 0;
				var france = 0;
				var germany = 0;
				var britain = 0;
				var greece = 0;
				var haiti = 0;
				var ireland = 0;
				var italy = 0;
				var jamaica = 0;
				var japan = 0;
				var kazahstan = 0;
				var korea = 0;
				var latvia = 0;
				var lithuania = 0;
				var mexico = 0;
				var morocco = 0;
				var netherlands = 0;
				var nicaragua = 0;
				var nigeria = 0;
				var norway = 0;
				var oman = 0;
				var philipines = 0;
				var poland = 0;
				var puerto = 0;
				var quatar = 0;
				var romania = 0;
				var russia = 0;
				var spain = 0;
				var switzerland = 0;
				var tanzania = 0;
				var turkey = 0;
				var uganda = 0;
				var united = 0;
				var venezuela = 0;
				var vietnam = 0;
				var yamen = 0;
				var zambia = 0;
				var zimbabwe = 0;

			</script>

	</body>

</html>
